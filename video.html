<!doctype html>
<html lang="en">

<head>
    <title>爱看电竞</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css">
    <!--     Fonts and icons     -->
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
    <!-- Material Kit CSS -->
    <link href="/public/assets/css/material-dashboard.css?v=2.1.1" rel="stylesheet" />
    <link rel="stylesheet" href="/public/css/owl.carousel.min.css">
    <link rel="stylesheet" href="/public/css/owl.theme.default.min.css">
    <!-- layui -->
    <link rel="stylesheet" href="/public/layui/css/layui.css" media="all">
    <link rel="stylesheet" href="/public/layui/css/layui.mobile.css" media="all">
    <link rel="stylesheet" type="text/css" href="/public/css/index.css">
</head>

<body style="width:100%;">
    <div class="wrapper">
        <nav class="navbar sticky-top navbar-expand-md navbar-dark bg-dark" style="margin-bottom:0;border-radius: 0px;">
            <div class="container" style="max-width: 95%;">
                <a class="navbar-brand" href="/" style="font-size:20px;font-weight: 900;">爱看电竞</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" aria-expanded="false" data-target="#collapsibleNavbar">
                    <span class="navbar-toggler-icon"></span>
                    <span class="navbar-toggler-icon"></span>
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="collapsibleNavbar">
                    <ul class="navbar-nav mr-auto justify-content-center">
                        <li class="nav-item">
                            <a class="nav-link" href="/" style="font-size:16px;font-weight: 600;">主页 <span class="sr-only">(current)</span></a><!-- 是用于帮助残障人士阅读的 -->
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="/videoReply" style="font-size:16px;font-weight: 600;">复盘视频</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/calendar" style="font-size:16px;font-weight: 600;">比赛日程</a>
                        </li> <!--
                        <li class="nav-item">
                            <a class="nav-link" href="/news/234123" style="font-size:15px;">热点新闻</a>
                        </li>-->
                        <li class="nav-item">
                            <a class="nav-link" href="/aboutus" style="font-size:16px;font-weight: 600;">关于我们</a>
                        </li>
                    </ul>
                    <ul class="navbar-nav ml-auto justify-content-end">
                        <li class="nav-item">
                             {% if username %}
                             <a href="/userSetting" style="color:#fff;font-size:16px;font-weight: 600;"> {{username}} </a>
                             </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/logout" style="font-size:16px;font-weight: 600;">退出</a>

                            {% else %}
                            <a class="nav-link" href="/login" style="font-size:16px;font-weight: 600;">登录</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/register" style="font-size:16px;font-weight: 600;">注册</a>
                        {% endif %}
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <div style="width:95%;margin:10px auto;">
            <div class="owl-carousel owl-theme wow fadeIn" data-wow-duration="1s" data-wow-delay="0s">
                
                <div class="item"><img src="/public/img/b2.png" style="border-radius: 6px;"></div>
            </div>
        </div>
        <!-- <div class="owl-carousel owl-theme wow fadeIn" data-wow-duration="1s" data-wow-delay="0s">
            <div class="item"><img src="/public/img/b1.jpg"> </div>
            <div class="item"><img src="/public/img/b2.jpg"></div>
            <div class="item"><img src="/public/img/b3.jpg"></div>
        </div> -->
        <div class="content" style="width:95%;margin:0 auto;">
            <!-- <div class="container-fluid"> -->
            <!-- your content here -->
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 wow fadeIn" data-wow-duration="2s" data-wow-delay="0.5s">
                    <div class="card">
                        <div class="card-header card-header-text card-header-primary">
                            <div class="card-text" style="background: linear-gradient(60deg, #353535, #212121);">
                                <a href="#" style="color:#ffffff;">
                                    <h3 class="card-title">复盘视频</h3>
                                </a>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="row" id="allMatches">
                            </div> <!-- row -->
                           
                        </div><!-- card-body -->
                    </div><!-- card -->
                </div><!-- 列 -->
            </div>
        </div>
        <footer class="footer hidden-print wow fadeInUp" data-wow-duration="2s" data-wow-delay="0.5s">
            <div class="container-fluid text-center">
                <!-- <nav>
                    <ul>
                        <li>
                            <a href="https://www.creative-tim.com">
                                Creative Tim
                            </a>
                        </li>
                        <li>
                            12313546
                        </li>
                    </ul>
                </nav> -->
                <div class="media-logo row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 footer-text">
                        合作媒体
                    </div>
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                       <!-- <img class="img-responsive logo-img" src="/public/img/qqgame.png">-->
                    </div>
                </div>
                <div class="about-us">
                    <a href="/aboutus">关于我们</a>
                </div>
                <div class="copyright">
                    &copy;
                    <script>
                    document.write(new Date().getFullYear())
                    </script>
                    <a href="http://www.beian.miit.gov.cn/" target="_blank">陕ICP备 18009052号-3</a>
                </div>
                <!-- your footer here -->
            </div>
        </footer>
    </div>
    </div>
    <!-- jquery要在bootstrap前面，不然会报错 -->
    <script type="text/javascript" src="/public/node_modules/jquery/dist/jquery.js"></script>
    <script type="text/javascript" src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
    <script src="/public/layui/layui.js" charset="utf-8"></script>
    <script type="text/javascript" src="/public/node_modules/popper.js/dist/umd/popper.js"></script>
    <script src="/public/js/owl.carousel.min.js"></script>
    <script type="text/javascript" src="/public/node_modules/wowjs/dist/wow.js"></script>
    <script type="text/javascript">
    $(document).ready(function() {
// 用来从后台获取比赛数据
        // 注意会获取全部的比赛场次，未来肯定会设置为只显示部分数据
        var jqxhr = $.getJSON('/api/matchs')
        .done(function (data) {
            // data已经被解析为JSON对象了
            var flag = 0
            data.forEach (async (item) => {
            flag ++ 
            var team_blue_name = item.team_blue_name
            var team_red_name = item.team_red_name
            var raceID = item.game_id
            var game_status = item.game_status
//          全部展示，不对flag进行判断了
            if (game_status ==2) {
                $("#allMatches").prepend(`
            <div class="col-lg-3 col-md-3 col-sm-4 col-xs-4">
                                    <div class="card shadow" style="margin-top:0;">
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                    <a href="/videoReply/${raceID}"><img src="/public/img/exp1.jpg" class="img-responsive center-block video-img"></a>
                                                </div>
                                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                    <a href="/videoReply/${raceID}" style="color:#333333;">
                                                        <!-- <h3 style="font-weight:600;">2019 LDL 夏季赛</h3> -->
                                                        <h3 style="font-weight:600;">${item.game_name}</h3>
                                                        <h3 class="video-title">${team_blue_name} VS ${team_red_name}</h3>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div><!-- 一个视频 -->
            `)
            }
         })
        }).fail(function (xhr, status) {
            console.log("请求失败")
        }).always(function () {
            console.log('请求完成: 无论成功或失败都会调用')
        })
        $(".owl-carousel").owlCarousel({
            animateOut: 'fadeOutRight',
            animateIn: 'fadeInLeft',
            items: 1,
            loop: true,
            center: true,
            autoHeight: true,
            autoplay: true,
            autoplaySpeed: 30,
            transitionStyle: true,
            // nav: true,
            dots: true,
            dotsEach: true,
            // dotsData:true,
            // margin: 30,
            // stagePadding: 30,
            smartSpeed: 40
        });
    });
    var wow = new WOW({
        boxClass: 'wow', // animated element css class (default is wow)
        animateClass: 'animated', // animation css class (default is animated)
        offset: 0, // distance to the element when triggering the animation (default is 0)
        mobile: true, // trigger animations on mobile devices (default is true)
        live: true, // act on asynchronously loaded content (default is true)
        callback: function(box) {
            // the callback is fired every time an animation is started
            // the argument that is passed in is the DOM node being animated
        },
        scrollContainer: null // optional scroll container selector, otherwise use window
    });
    wow.init();
    layui.use(['util', 'laydate', 'layer'], function() {
        var util = layui.util,
            laydate = layui.laydate,
            layer = layui.layer;
        //固定块
        util.fixbar({
            bar1: '&#xe68e;',
            bar2: false,
            css: { right: 50, bottom: 100 },
            bgcolor: '#393D49',
            click: function(type) {
                if (type === 'bar1') {
                    window.location.href="/";
                }
            }
        });
    })
    </script>
</body>

</html>
